# 시퀀스 해킹, 해시, 슬라이스

이 장에서는 다차원 벡터를 나타내는 클래스를 생성해서 앞 장에서 구현한 2차원 Vector2d 클래스를 상당히 개선할 것이다. 벡터는 표준 파이썬의 불변 균일 시퀀스와 비슷하게 작동할 것이며, 실수를 요소로 가지게 되며, 이 장을 마칠 때는 다음과 같은 기능을 지원하게 될 것이다.

* 기본 시퀀스 프로토콜: __len__()과 __getitem__() 메서드
* 여러 항목을 가진 객체를 안전하게 표현
* 슬라이싱을 지원해서 새로운 벡터 객체 생성
* 포함된 요소 값을 모두 고려한 집합 해싱
* 커스터마이즈된 포맷 언어 확장

그리고 시퀀스형에 일반적으로 사용되는 기법은 아니지만, Vector2d의 읽기 전용 프로퍼티를 교체하기 위해 __getattr__() 메서드로 동적 속성 접근을 구현한다.

예제 코드 중간에 프로토콜을 비공식 인터페이스로 사용하는 것에 대한 개념을 설명한다. 프로토콜이 **덕 타이핑**과 어떻게 연관되는지, 여러분이 직접 자료형을 만들 때 어떤 영향을 미치는지에 대해 설명한다.

# 요약
이 장에서 구현한 Vector 클래스는 단일 반복형 인수를 받는 내장 시퀀스의 다양한 생성자 시그너처를 제외하고는 Vector2d 클래스와 호환되도록 설계되었다. __getitem__()과 __len__() 메서드를 구현함으로써 Vector가 시퀀스처럼 동작한다는 사실을 통해 프로토콜을 설명했다. 덕 타이핑을 지원하는 파이썬 언어에서의 프로토콜은 비공식 인터페이스다.

그리고 slice(a, b, c) 객체를 생성하고 __getitem__() 메서드에서 처리함으로써 my_seq[a:b:c]가 내부적으로 작동하는 방식을 살펴봤다. 이 지식을 이용해서 파이썬 시퀀스의 작동 방식과 유사하게 새로운 Vector 객체를 반환함으로써 Vector 클래스가 슬라이싱에 대해 올바로 반응하도록 만들었다.